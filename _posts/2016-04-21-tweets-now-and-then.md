---
layout: post
title: 杂七杂八的随感［持续更新］
date: 2016-04-28 23:08:00 +0800
tags: 
    - tweets
    - todo
---

博客开起来容易，维护起来却不容易Orz。。脑子里的 TodoList 越来越长，但确实又没有集中的时间来处理，想在微博上记下一些想法和计划，但是久了之后就发现它们被无情地淹没在了各种转发的段子中了，索性在这里开一个杂七杂八的记录档，tweets now and then，记录自己关于 **前端开发** 的一些 **想法与计划**。

*生活上的吐槽依然放在微博（[在下字三土](http://weibo.com/andrewidiot)），有兴趣的可以互粉一下哦～*

## 2016/4/28 23:08:00

#### 公司项目

一个需求做了三天终于可以提测了，感觉像过了一个世纪Orz。。之前觉得说公司项目的OO写得不是很好，但这次需求接触到的这个模块，有一部分还是让我觉得很不错的。

我们已经有一个用来查询各种信息的组件了，也有一个用来查询营销活动详细信息的组件了，现在我需要做一个仅查询部分信息的模态框组件。OK，很简单，我实例化了一个信息查询组件的控制器 `QueryControler`，又实例化了一个查询营销活动详情的控制器 `EventQueryControler`，`EventQueryControler` 的数据模型就是一个营销活动详情查询的数据模型，我只需要为这个模态框组件提供相应的视图 `View` 并作为 `EventQueryControler` 的视图部分就可以了；在这个 `View` 中，我只需要提供渲染数据的方法供控制器调用即可。

如此封装，让组件的开发确实简单了很多，我不需要知道查询是怎么进行的，数据又是怎么处理的，我只关心我需要展示的查询框以及查询结果，而这些都是很直观可以处理的。

## 2016/4/24 22:24

#### 个人博客

花了一整个周末的时间把自己博客的整个架构大改了一下。  css用less重新编写了，真是个大工程，不过改完之后感觉舒畅了好多，css终于不是一团乱麻了。  
然后为文章添加了右侧边栏导航，这个真的是想做很久了，文章太长看着难受！  
最后用grunt进行自动化构建。  

改完之后虽然页面上看起来并没有多大改变，但是感觉整个项目结构清晰了很多，也更加愿意去维护了。


## 2016/4/22 22:13

#### 公司项目架构

目前公司项目的架构是由一个牛人一手搭建起来的，我是没办法想象这种事情，但是我希望将来我也可以信手拈来，哈哈～

然而，搭完架构（或者还没有完全搭完？！）之后，牛人就离开了，文档和规范什么的都还没有写，也没有人整理，因此后来人都只能够根据自己对代码的理解来继续进行开发，从而造成了各个页面的代码风格迥异，甚至都没有遵循架构来开发，因此后续的维护压力也会越来越大。

目前公司的产品也比较稳定了，是时候开始对代码进行梳理，甚至是对整个架构进行整理了，基于此来优化页面的性能，例如template的进一步提取，数据模型的整合等等，这些都是很大的工程，需要一些具体的实施计划。

#### 第一次刻意使用闭包

今天在改一个Bug的时候用到了闭包的技术，虽然说JS中闭包并不少见，但如此刻意地利用闭包的技术还是第一次，也让我注意到了一些关于事件回调绑定的问题，这个有待进一步实验验证，需要加入到TodoList中。

#### Todo

- 整理关于事件回调函数闭包的问题，关注参数的传递方式、闭包中的函数调用等[★★★★★]


## 2016/4/21 22:50

#### 关于转行

从开始学习前端开发到正式从事相关的工作已经有一段时间了。一直想写个文档纪录一下自己的学习过程以及面试的经验，但是想想就觉得工程非常浩大，而且自己目前还处于初学者的阶段，并不适合在这里夸夸其谈，这个Todo就暂时搁置吧。

#### 公司项目

在公司做项目也快有一个星期了，完成了几个需求，修复了一些bug，读的代码量也算是挺多了，基本的架构都搞清楚了，很多的坑也见识到了，一些自己的想法初见雏形，希望再了解更多之后做出一些改变，小公司好的地方就是可以充分地发挥。

公司做的是单页面应用（SPA），属于比较前卫的产品，也是我在前端领域最感兴趣的一块！MVC框架用的是 Stapes.js，模板库用的是 handlebars.js，工具库混用 underscore.js 和 jquery.js，布局和组件库用的是 bootstrap。

公司的各个页面基本都采用了 MVC 的思想，但目前代码看下来，并 *没有* 觉得其实现了 MVC 思想的关键部分；使用了 Stapes.js 框架，但仅仅用到了他的自定义事件触发与回调机制，核心的类继承、数据模型自动事件触发都没有用到，而且 `view.js` 中的代码充斥着大量的业务逻辑甚至是直接的数据操作，这些都与 MVC 的思想相去甚远。

使用 handlebars 定义的模板不错，但是没有文档对调用时的 `context` 进行说明，而且 `helper` 与 `partial` 的注册函数放在了模板文件之外，让人有些不知所云。

搭建架构的牛X同事自己写了一个函数库，但是文档不全，代码读起来非常费劲，这个要加入到 Todo List，代码读都读了，不写个接口文档出来岂不是白读了！

今天做一个需求，需要联动两个不同路由下的参数配置，前人的做法非常hack，是将参数放在了一个公用的 navbar 元素的 `data` 属性里面，我在改另一个bug的时候碰巧发现了，不然我又得搞出另一种hack来，这样以后代码还怎么读！  
我觉得把这种需要共享的变量放到一个全局命名空间中再适合不过了，在一个文件中统一定义这些参数的默认值，这样可以非常方便地查找到共享的参数，同时也减轻了DOM元素的压力，而且关键是不用hack啊！（我一直对 `data` 属性有深深的成见，希望是我的误解。。

#### Todo

- 完善自定义库函数的接口文档 [★★★★★]
- 完善模板库的调用上下文接口文档 [★★★☆]
- 总结不同路由下的公共参数，并将其归纳到一个统一的命名空间中 [★★]
