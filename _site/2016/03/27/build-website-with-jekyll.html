<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="img/favicon.ico">

    <title>如何使用jekyll建站 - 三土的博客 | AmBeta Blog</title>

    <link rel="canonical" href="http://ambeta.github.io/2016/03/27/build-website-with-jekyll.html">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Pygments Github CSS -->
    <link rel="stylesheet" href="/css/syntax.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/main.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->

    <link href="http://cdn.staticfile.org/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

</head>


<body ontouchstart="">
    <!-- Navigation -->
<nav class="navbar navbar-default navbar-custom">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">AmBeta Blog</a>
        </div>

        <div id="navbar-items">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="/">HOME</a></li>
                    <li><a href="/tags.html">TAGS</a></li>
                    <li><a href="/about.html">ABOUT</a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>
<script>
    // Navbar derives from huxpro@github
    var _body   = document.body;
    var _toggle = document.querySelector('.navbar-toggle');
    var _navitems = document.querySelector('#navbar-items');
    var _collapse = document.querySelector('.navbar-collapse');
    var _navDisp = {
        hide: function() {
            _navitems.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if(_navitems.className.indexOf('in') < 0) {
                    _collapse.style.height = "0px";
                }
            },400);
        },

        show: function() {
            _collapse.style.height = "auto";
            _navitems.className += " in";
        }
    }

    _toggle.addEventListener('click', toggleNav);
    _body.addEventListener('click', hideNav);

    function toggleNav(e) {
        if (_navitems.className.indexOf('in') > 0) {
            _navDisp.hide();
        }else {
            _navDisp.show();
        }
    }
    function hideNav(e) {
        if (e.target == _toggle) return;
        if (e.target == _navitems) return;
        _navDisp.hide();
    }
</script>


    <!-- Post Header -->
<header class="post-header">
    <div class="container">
        <div class="row">
            <div class="col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2">
                <div class="tags">
                    
                    <a class="tag" href="/tags.html#jekyll" title="jekyll">jekyll</a>
                    
                </div>
                <h1>如何使用jekyll建站</h1>
                <div class="post-meta">
                    Posted on March 27, 2016
                </div>
            </div>
        </div>
    </div>
</header>

<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">
            <div class="col-md-10 col-md-offset-1 col-lg-8 col-lg-offset-2 post-container">

                <p>终于把自己的个人博客折腾好了，可以开开心心地发博文啦！</p>

<p>个人博客这种东西，主要是为了记录一下自己成长的过程，其次也可以作为与其他人交流共享一些经验的平台，而对于我这种健忘的人则是个必不可少的东西，不然过些时日，连jekyll怎么拼的都会忘掉了Orz。。</p>

<p>之前也尝试在CSDN上维护自己的博客，但是感觉发文危险系数很高，审核慢就不说了，万一审核不过，码了半天的字都白费了，很是难受，听说Github可以免费挂个人主页，果断尝试一波。</p>

<p>建站选用的是jekyll这个工具，可以与Github配合使用，其他的还有Hexo等建站工具。</p>

<h2 id="jekyll">jekyll简介</h2>

<p>jekyll是一个可以将纯文本转化为静态网站的工具，因可以与github pages完美契合而受到很多程序猿的青睐。</p>

<p><a href="http://www.bootcss.com/">Bootstrap中文网</a>对jekyll的描述如下：</p>

<blockquote>
  <p>简单：无需数据库、评论功能，不需要不断地更新版本——只用关心你的博客内容<br />
静态：只用Markdown（或Textile）、Liquid、HTML&amp;CSS就可以构建可部署的静态网站<br />
博客形态：自定义地址、分类、页面、博客内容以及自定义的布局设计都是系统中一等公民</p>
</blockquote>

<hr />

<h2 id="jekyll-1">jekyll手动建站</h2>

<p>jekyll用的人很多，网上也有很多现成的模板供大家选用。起初我也想选个模板直接进入写博客的正题，但是找了很久都找不到心仪的模板，有的功能非常赞，但是页面风格不是我的style，有的风格很赞，但是功能又过于繁复。索性自己摸索做一个属于自己的，顺便学习一下这个工具的使用，毕竟用jekyll＋Github不发挥点geek精神有点不合适吧。</p>

<p>Anyway，如果只想火速建个站，可以直接跳转到<a href="#jekyll-template">应用<strong>jekyll模板</strong></a>。</p>

<h3 id="section">环境搭建</h3>

<p>jekyll的环境搭建非常简单，使用如下命令即可建立一个新的站点：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>~ $ gem install jekyll
~ $ jekyll new myblog
~ $ cd myblog
~/myblog $ jekyll serve
</code></pre>
</div>

<p>完成上述命令之后，用浏览器访问<code class="highlighter-rouge">http://localhost:4000</code>即可打开这个新的站点（当然现在什么都没有）。</p>

<p><em>PS：</em> 环境搭建中遇到的问题可以参考<a href="http://jekyll.bootcss.com/docs/quickstart/">jekyll快速指南</a>尝试获取解决方案。</p>

<h3 id="section-1">目录结构</h3>

<p>一般情况下jekyll的目录结构如下，其中<code class="highlighter-rouge">[*]</code>是必选项（如果你想只写一个index.html的话就不需要用jekyll啦- -），而为了获得较好的站点结构以便后续的维护，下面的这个目录结构是最基本的。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>/myblog
    |-- _includes
          |-- head.html
          |-- nav.html
          |-- footer.html
    |-- _layouts [*]
          |-- default.html
          |-- page.html
          |-- post.html
    |-- _posts [*]
          |-- 2016-03-23-hello-world.md
    |-- imgs
    |-- css
          |-- main.css
    |-- fonts
    |-- js
    |-- _config.yml [*]
    |-- index.html [*]
</code></pre>
</div>

<ul>
  <li><code class="highlighter-rouge">_layouts</code>中存放的是页面的布局文件。</li>
  <li><code class="highlighter-rouge">_includes</code>中存放的是一些文档的组成部分，一般可以被<code class="highlighter-rouge">_layouts</code>中的页面布局文件所引用，以减少代码的重复，通常可以用来布局一些html文件头、导航条以及页面脚注等。</li>
  <li><code class="highlighter-rouge">_posts</code>中存放的是发布的博文。</li>
  <li><code class="highlighter-rouge">imgs</code>中存放的是网站用到的所有图片资源。</li>
  <li><code class="highlighter-rouge">css</code>, <code class="highlighter-rouge">fonts</code>, <code class="highlighter-rouge">js</code>中存放的分别是页面引用的所有样式表、字体文件以及脚本。</li>
  <li><code class="highlighter-rouge">_config.yml</code>文件是整个站点的配置文件。</li>
  <li><code class="highlighter-rouge">index.html</code>文件即为站点的主页。</li>
</ul>

<p>大部分情况下，除了站点主页外，一个站点中还会含有<code class="highlighter-rouge">404.html</code>, <code class="highlighter-rouge">about.html</code>等页面，用于更加完善的个人主页以及更佳的访客体验，当然这些都不是必须的，只要你的博文写的够精彩，这些都不是重点～</p>

<h3 id="section-2">常用语法</h3>

<p>在介绍不同文件的配置之前，首先需要了解一下jekyll中常用的一些语法规则，这些在编写页面布局文件的时候极为有用，后续博文信息的自动化生成方面就全靠它了。</p>

<ul>
  <li>jekyll中的<strong>全局变量</strong>主要有<code class="highlighter-rouge">site</code>, <code class="highlighter-rouge">page</code>, <code class="highlighter-rouge">paginator</code>, <code class="highlighter-rouge">content</code>，而前三者又更像是一个对象，其中包含着其他的变量，使用<code class="highlighter-rouge">.</code>运算符即可访问，例如使用<code class="highlighter-rouge">site.title</code>可以访问站点名字变量。</li>
  <li>jekyll中<strong>语句</strong>使用<code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">%</span></code>和<code class="highlighter-rouge">% }</code>进行包裹，且每一个语句块都需要显示地闭合，例如<code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">%</span><span class="w"> </span><span class="err">if</span><span class="w"> </span><span class="err">%</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="err">blablabla</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="err">%</span><span class="w"> </span><span class="err">endif</span><span class="w"> </span><span class="err">%</span><span class="w"> </span><span class="p">}</span></code>即为一个条件语句块。</li>
  <li>jekyll中使用双重大括号包裹的变量表示<strong>取值</strong>运算，例如<code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="err">page.title</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="err">}</span></code>语句可以取得<code class="highlighter-rouge">page.title</code>的值。</li>
</ul>

<h3 id="section-3">文件配置</h3>

<h5 id="configyml--">_config.yml － 站点配置文件</h5>

<p>该文件中保存的主要是整个站点的配置，其中的每项配置都作为全局变量<code class="highlighter-rouge">site</code>的成员变量可以在任意站点文件中访问到。</p>

<p>一个常见的站点配置文件可能长得像下面这样：</p>

<div class="highlighter-rouge"><pre class="highlight"><code># Site settings
title: AmBeta Blog
SEOTitle: 三土的博客 | AmBeta Blog
header-img: imgs/header-bg.png
header-thumb: imgs/my-thumb.png
email: cyandrewchen@gmail.com
description: ""
keyword: ""
url: "http://ambeta.github.io"  # your host, for absolute URL
baseurl: ""  

# Build settings
gems: [jekyll-paginate]
paginate: 5
exclude: ["less","node_modules","Gruntfile.js","package.json","README.md"]

# Markdown settings
markdown: kramdown
kramdown:
  input: GFM
</code></pre>
</div>

<h5 id="layouts--">layouts － 页面布局</h5>

<p>该文件夹下存放的是所有的页面布局文件，页面布局文件是一系列的<code class="highlighter-rouge">.html</code>文件，如下是一个典型的页面布局文件：</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html</span> <span class="na">lang=</span><span class="s">"zh-CN"</span><span class="nt">&gt;</span>

{ % include head.html % }

<span class="nt">&lt;body&gt;</span>
    { % include navbar.html % }

    { { content } }

    { % include footer.html % }

<span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre>
</div>

<ul>
  <li>使用<code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">%</span><span class="w"> </span><span class="err">include</span><span class="w"> </span><span class="err">head.html</span><span class="w"> </span><span class="err">%</span><span class="w"> </span><span class="p">}</span></code>语句可以引入<code class="highlighter-rouge">_includes</code>文件夹中<code class="highlighter-rouge">head.html</code>的所有内容。</li>
  <li>使用<code class="highlighter-rouge"><span class="p">{</span><span class="w"> </span><span class="err">{</span><span class="w"> </span><span class="err">content</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="err">}</span></code>语句会将使用该模版的文件的内容填充到这里。</li>
</ul>

<h5 id="indexhtml--">index.html － 站点主页</h5>

<p>jekyll会将该文件识别为站点的主页，同时Github也将识别该文件作为当访问你的Github pages时会显示的页面。<br />
<strong>注意</strong>该文件的名称一定要为<code class="highlighter-rouge">index.html</code>。<br />
在文件头部使用如下配置语句可以指定页面所用的模板：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>---
layout: default
---
</code></pre>
</div>

<h5 id="posts--">posts － 博文</h5>

<p>该文件夹下存放的是所有的博文。<br />
jekyll支持多种markdown引擎（有需求的话可以在<code class="highlighter-rouge">_config.yml</code>文件中自定义引擎选择）。<br />
jekyll要求每篇博文的名字都遵循如下的格式：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Year-Month-Date-PostTitle
</code></pre>
</div>

<p>例如<code class="highlighter-rouge">2016-03-22-hello-world.md</code>, <code class="highlighter-rouge">2020-02-22-byebye-world.textile</code>都是合法的博文命名。<br />
博文头部定义的变量可以作为<code class="highlighter-rouge">page</code>变量的成员变量被访问到，常见的博文头部如下：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>title: Hello World
date: 2016-03-22
layout: post
</code></pre>
</div>

<h3 id="section-4">更多功能</h3>

<h5 id="paginator--">paginator － 分页</h5>

<p>jekyll支持自动分页，在<code class="highlighter-rouge">_config.yml</code>文件中加上如下配置可开启分页功能，可以控制每页的最大显示条目数量。<br />
例如，在<code class="highlighter-rouge">index.html</code>文件中使用如下语句可以分页显示所有博文的摘要信息：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;!-- Post Content Preview --&gt;
{ % for post in paginator.posts % }
&lt;div class="post-preview"&gt;
	&lt;a href="{ { post.url | prepend: site.baseurl } }"&gt;
		&lt;h2 class="post-title"&gt;
			{ { post.title } }
		&lt;/h2&gt;
		&lt;div class="post-content-preview"&gt;
			{ { post.content | strip_html | truncate:100 } }
		&lt;/div&gt;
	&lt;/a&gt;
	&lt;p class="post-meta"&gt;
		Posted on { { post.date | date: "%B %-d, %Y" } }
	&lt;/p&gt;
&lt;/div&gt;
&lt;hr&gt;
{ % endfor % }
</code></pre>
</div>

<p>更多关于分页的信息可参考<a href="http://jekyll.bootcss.com/docs/pagination/">jekyll分页功能</a>。</p>

<hr />

<h2 id="a-namejekyll-templateajekyll"><a name="jekyll-template"></a>应用jekyll模板</h2>

<p>当你物色到一个很喜欢的theme时，你就可以fork一下（如果人家愿意的话），然后稍作修改就可以开始你的博客之旅了。</p>

<p>主要需要注意修改的有以下几个方面：</p>

<ol>
  <li><code class="highlighter-rouge">_config.yml</code>文件中的站点名称、地址及其他个人信息与站点配置。</li>
  <li>修改主要布局文件如<code class="highlighter-rouge">head.html</code>, <code class="highlighter-rouge">footer.html</code>, <code class="highlighter-rouge">index.html</code>中包含的个人信息。</li>
</ol>

<p><strong><em>PS：</em></strong> 如果theme的作者有在Github上维护关于该theme的说明文档的话，那就按照作者的指引进行相应的配置就好啦～</p>

<p>上述的修改完成后就可以在<code class="highlighter-rouge">posts</code>文件夹中添加自己的博文了。</p>

<hr />

<h2 id="section-5">本地调试页面</h2>

<p>当火速写完一篇 <em>Hello World</em> 博文之后迫不及待地就想看看 <em>World</em> 到底有没有听到你的呼唤。</p>

<p>使用命令行进入站点的根目录，输入以下命令：</p>

<div class="highlighter-rouge"><pre class="highlight"><code>jekyll serve
</code></pre>
</div>

<p>jekyll便随即开始编译生成站点文件（存放在<code class="highlighter-rouge">_site</code>目录中），如果一切正常的话，jekyll会告诉你本地服务器部署的IP及端口号，打开浏览器进行访问即可。</p>

<p>在命令行中添加<code class="highlighter-rouge">--watch</code>选项可以让jekyll随时监听文件的变化并生成更新后的文件。</p>

<hr />

<h2 id="github">发布到Github</h2>

<p>使用Git工具将站点同步到Github仓库上，一切就大功告成啦～！</p>

<div class="highlighter-rouge"><pre class="highlight"><code>~ $ git branch    // * master
~ $ git commit -a -m "commit comment"
~ $ git push origin master
</code></pre>
</div>

<p>如果问题卡在使用Github Pages建立个人主页方面，可以参考<a href="https://segmentfault.com/a/1190000002765287">用Github来部署静态网页</a>，这篇文章写得很详细，当然，<a href="https://help.github.com/categories/github-pages-basics/">Github官网</a>也有相关的用户指引。</p>

<hr />

            
                <hr>

                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2016/03/23/game2048-mvc.html" data-toggle="tooltip" data-placement="top" title="利用MVC思想实现的2048小游戏">&larr; Previous Post</a>
                    </li>
                    
                    
                </ul>
            </div>
        </div>
    </div>
</article>




    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <ul class="list-inline text-center">
                    
                    

                    <!-- add Weibo, Zhihu by Hux, add target = "_blank" to <a> by Hux -->
                    
                    
                    <li>
                        <a target="_blank" href="http://weibo.com/andrewidiot">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    


                    
                    
                    <li>
                        <a target="_blank" href="https://github.com/ambeta">
                            <span class="fa-stack fa-lg">
                                <i class="fa fa-circle fa-stack-2x"></i>
                                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                            </span>
                        </a>
                    </li>
                    
                </ul>
                <p class="copyright text-muted">
                    Copyright &copy; AmBeta Blog 2016
                    <br>
                    Theme by <a href="http://ambeta.github.io">AmBeta</a> |
                    <iframe
                        style="margin-left: 2px; margin-bottom:-5px;"
                        frameborder="0" scrolling="0" width="91px" height="20px"
                        src="https://ghbtns.com/github-btn.html?user=ambeta&repo=ambeta.github.io&type=star&count=true" >
                    </iframe>
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<script src="/js/bootstrap.min.js "></script>

<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!-- init tooltip -->
<script type="text/javascript">
    $(function() {
        $("[data-toggle='tooltip']").tooltip();
    });
</script>

<!-- Highlight.js -->
<script>
    async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
        hljs.initHighlightingOnLoad();
    })
    // only load tagcloud.js in tag.html
    if($('#tag-cloud').length !== 0){
        async("/js/jquery.tagcloud.js",function(){
            $.fn.tagcloud.defaults = {
                size: {start: .8, end: 1.8, unit: 'em'},
                //color: {start: '#bbbbee', end: '#0085a1'},
            };
            $('#tag_cloud a').tagcloud();
        })
    }
</script>
<link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">

<!--fastClick.js -->
<script>
    async("http://cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>

<!-- Google Analytics -->


<!-- Baidu Tongji -->



</body>
</html>
